<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Livre: Tuvok Volume Data Generation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Livre
   &#160;<span id="projectnumber">0.7.0</span>
   </div>
   <div id="projectbrief">Largescale Interactive Volume Rendering Engine (Livre)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_tuvok__tool.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tuvok Volume Data Generation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="TABLE_OF_CONTENTS_Tuvok"></a>
Table of Contents</h1>
<ol type="1">
<li><a class="el" href="_tuvok__tool.html#GENERAL_INFORMATION_Tuvok">General Information</a></li>
<li><a class="el" href="_tuvok__tool.html#PIPELINE">Pipeline</a><ol type="a">
<li><a class="el" href="_tuvok__tool.html#Fiji">Fiji</a></li>
<li><a class="el" href="_tuvok__tool.html#TuvokDataConverter">TuvokDataConverter</a></li>
</ol>
</li>
</ol>
<p> 
<hr>
</p>
<h1><a class="anchor" id="GENERAL_INFORMATION_Tuvok"></a>
General Information</h1>
<p>Out-of-core volume rendering algorithms require the volume data to be pre-processed before visualization. Tuvok volume format (UVF) is an out-of-core format and is supported by Livre.</p>
<h1><a class="anchor" id="PIPELINE"></a>
Pipeline</h1>
<p>Tuvok library provides the "TuvokDataConverter" tool for pre-processing the NRRD (Nearly Raw Raster Data) format, therefore the data to be visualized should be first converted to NRRD format.</p>
<p>Generally data is either tiff slices or raw format, both can be read and converted to NRRD by the "Fiji" (<a href="http://fiji.sc/Fiji">http://fiji.sc/Fiji</a>) tool. Then, the resulting NRRD volumes can be converted to UVF format.</p>
<h2><a class="anchor" id="Fiji"></a>
Fiji</h2>
<p>Fiji is a scientific image processing tool and it has tons of features to convert, analyze, p rocess images and volumes. But, in context of this documentation we are only interested in converting the image stacks, raw volumes to NRRD format.</p>
<p>Image stacks mean sequence of ordered images in a folder. Those can be in any format such as tiff, jpg, etc. Those stacks can be loaded into Fiji using the menu items "File-&gt;Import-&gt;Image
Sequence...". After this menu item is selected, the first image in the stack should be selected by the file browser.</p>
<p>The following dialog will be presented to the user after selecting the first file.</p>
<div class="image">
<img src="ImageSeq.png" alt="ImageSeq.png"/>
<div class="caption">
Image Sequence Dialog</div></div>
<p> Here "Number of images" is the number of slices in the volume. You can change starting point of slices and rescaling parameters. While working with low memory "Use virtual stack" is an important item to select. If your images are 16 bit tiff images, you can either quantize them to 8 bits or you can directly use the 16 bit data using the "Convert to 8-bit Grayscale".</p>
<p>After a successful import, you can export your volume to NRRD format using the "File-&gt;Save as-&gt;Nrrd..." menu option. A "raw volume" means that, the data has no format attached to it. So, before importing any raw volume user should be aware of the per data item format (8bit, 16bit, signed, unsigned, float etc, endianness), the width, height and length of the volume.</p>
<p>To import the raw volumes in Fiji, "File-&gt;Import-&gt;Raw..." menu item should be selected. After choosing your raw volume through the file browser the following dialog will be presented.</p>
<div class="image">
<img src="ImportRaw.png" alt="ImportRaw.png"/>
<div class="caption">
Import Raw Dialog</div></div>
<p> In the GUI, "Image type" is the data type per item, "Width", "Height" and "Number of images" correspond to the width, height and length of the volume, respectively. In case of low memory, "Use virtual stack" is highly recommneded.</p>
<p>After a successful import, again, you can export your volume to NRRD format using the "File-&gt;Save as-&gt;Nrrd..." menu option.</p>
<h2><a class="anchor" id="TuvokDataConverter"></a>
TuvokDataConverter</h2>
<p>"TuvokDataConverter" <a href="https://github.com/BlueBrain/TuvokDataConverter.git">source code</a>is the tool to convert NRRD volumes into Tuvok format. If you execute the command with "--help" option, you can see the parameters of the executable.</p>
<div class="fragment"><div class="line">TuvokDataConverter --help</div>
<div class="line"></div>
<div class="line">USAGE:</div>
<div class="line"></div>
<div class="line">  TuvokDataConverter  {-i &lt;filename&gt; ... |-d &lt;path&gt;} [-q] [--experimental]</div>
<div class="line">                      [-g] [-e &lt;string&gt;] [-v &lt;positive integer&gt;] [-p</div>
<div class="line">                      &lt;positive integer&gt;] [-l &lt;positive integer&gt;] [-r</div>
<div class="line">                      &lt;positive integer&gt;] [-c &lt;positive integer&gt;] [-m</div>
<div class="line">                      &lt;floating point number&gt;] [-s &lt;floating point</div>
<div class="line">                      number&gt;] [-b &lt;floating point number&gt;] -o &lt;filename&gt;</div>
<div class="line">                      [--] [--version] [-h]</div>
<div class="line"></div>
<div class="line">Where:</div>
<div class="line"></div>
<div class="line">  -i &lt;filename&gt;,  --input &lt;filename&gt;  (accepted multiple times)</div>
<div class="line">    (OR required)  input file.  Repeat to merge volumes</div>
<div class="line">        -- OR --</div>
<div class="line">  -d &lt;path&gt;,  --directory &lt;path&gt;</div>
<div class="line">    (OR required)  input directory</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  -q,  --quantize</div>
<div class="line">    Quantize to 8 bits</div>
<div class="line"></div>
<div class="line">  --experimental</div>
<div class="line">    Enable experimental features</div>
<div class="line"></div>
<div class="line">  -g,  --debug</div>
<div class="line">    Enable debugging mode</div>
<div class="line"></div>
<div class="line">  -e &lt;string&gt;,  --expression &lt;string&gt;</div>
<div class="line">    merge expression</div>
<div class="line"></div>
<div class="line">  -v &lt;positive integer&gt;,  --level &lt;positive integer&gt;</div>
<div class="line">    UVF compression level between (1..10)</div>
<div class="line"></div>
<div class="line">  -p &lt;positive integer&gt;,  --compress &lt;positive integer&gt;</div>
<div class="line">    UVF compression method 0: no compression, 1: zlib, 2: lzma, 3: lz4, 4:</div>
<div class="line">    bzlib, 5: lzham</div>
<div class="line"></div>
<div class="line">  -l &lt;positive integer&gt;,  --bricklayout &lt;positive integer&gt;</div>
<div class="line">    brick layout on disk 0: scanline, 1: morton, 2: hilbert, 3: random</div>
<div class="line">    order</div>
<div class="line"></div>
<div class="line">  -r &lt;positive integer&gt;,  --brickoverlap &lt;positive integer&gt;</div>
<div class="line">    set brick overlap</div>
<div class="line"></div>
<div class="line">  -c &lt;positive integer&gt;,  --bricksize &lt;positive integer&gt;</div>
<div class="line">    set maximum brick size (64)</div>
<div class="line"></div>
<div class="line">  -m &lt;floating point number&gt;,  --memory &lt;floating point number&gt;</div>
<div class="line">     max allowed memory to use in MB 16384</div>
<div class="line"></div>
<div class="line">  -s &lt;floating point number&gt;,  --scale &lt;floating point number&gt;</div>
<div class="line">    (merging) scaling value <span class="keywordflow">for</span> second file</div>
<div class="line"></div>
<div class="line">  -b &lt;floating point number&gt;,  --bias &lt;floating point number&gt;</div>
<div class="line">    (merging) bias value for second file</div>
<div class="line"></div>
<div class="line">  -o &lt;filename&gt;,  --output &lt;filename&gt;</div>
<div class="line">    (required)  output file (uvf)</div>
<div class="line"></div>
<div class="line">  --,  --ignore_rest</div>
<div class="line">    Ignores the rest of the labeled arguments following this flag.</div>
<div class="line"></div>
<div class="line">  --version</div>
<div class="line">    Displays version information and exits.</div>
<div class="line"></div>
<div class="line">  -h,  --help</div>
<div class="line">    Displays usage information and exits.</div>
</div><!-- fragment --><p>The important parameters are:</p>
<ul>
<li>"-i" for the input NRRD file</li>
<li>"-o" for the output UVF file</li>
<li>"-p" for compression algorithm where compression can be enabled at the cost of more computing, but less data reading -</li>
<li>"-c" for maximum brick size. A smaller brick size can increase the complexity of the out-of-core data structure, while bigger bricks may increase the loading times. If for ex: the volume is 1024x1024x1024 in size, selecting a 32 size block will cause a 5 deep out-of-core tree, where algorithms can be slower when camera is close to the object (this still has to be improved) </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 15 2016 03:03:58 for Livre by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
