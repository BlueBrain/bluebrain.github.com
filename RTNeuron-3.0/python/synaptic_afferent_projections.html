<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Synaptic afferent projections &mdash; RTNeuron 3.0 Python API documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="RTNeuron 3.0 Python API documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">RTNeuron 3.0 Python API documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="synaptic-afferent-projections">
<span id="id1"></span><h1>Synaptic afferent projections<a class="headerlink" href="#synaptic-afferent-projections" title="Permalink to this headline">Â¶</a></h1>
<p>We start dispaying the circuit for a full column in soma only mode.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">rtneuron</span>
<span class="kn">import</span> <span class="nn">brain</span>

<span class="c1"># Presetting the global variables for the default window size</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">global_attributes</span><span class="o">.</span><span class="n">window_width</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">global_attributes</span><span class="o">.</span><span class="n">window_height</span> <span class="o">=</span> <span class="mi">1100</span>
<span class="k">if</span> <span class="s1">&#39;EQ_WINDOW_IATTR_HINT_FULLSCREEN&#39;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
    <span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;EQ_WINDOW_IATTR_HINT_FULLSCREEN&#39;</span><span class="p">]</span>

<span class="c1"># Creating the attributes for the neuron set that will be displayed</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">AttributeMap</span><span class="p">()</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">RepresentationMode</span><span class="o">.</span><span class="n">SOMA</span>
<span class="c1"># Displaying the circuit</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">display_circuit</span><span class="p">(</span><span class="n">brain</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">circuit_config</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;MiniColumn_[0-9]&#39;</span><span class="p">,</span> <span class="n">attributes</span><span class="p">))</span>

<span class="n">view</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">views</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">view</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">view</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">setView</span><span class="p">([</span><span class="mi">40</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2185</span><span class="p">],</span> <span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">))</span>
<span class="c1"># Make sure the camera is not modified after scene modifications.</span>
<span class="n">view</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">auto_compute_home_position</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">scene</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">snapshot_to_notebook</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>Trying to load blue config: /home/hernando/bbp/data/blue.cfg... done
Creating 10000 neurons
0%   10   20   30   40   50   60   70   80   90   100%
|----|----|----|----|----|----|----|----|----|----|
***************************************************
Adding 10000 neurons to the scene
0%   10   20   30   40   50   60   70   80   90   100%
|----|----|----|----|----|----|----|----|----|----|
***************************************************
</pre></div>
</div>
<img alt="_images/synaptic_afferent_projections_1_1.png" src="_images/synaptic_afferent_projections_1_1.png" />
<p>Now we pick an arbitrary presynaptic cell and find its set of
postsynaptic cells. For this purpose we use the class
rtneuron.sceneops.SynapticProjections, which implements several
algorithms to find out projections between cells.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">projections</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">sceneops</span><span class="o">.</span><span class="n">SynapticProjections</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span>
                                                    <span class="n">target_mode</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">RepresentationMode</span><span class="o">.</span><span class="n">SOMA</span><span class="p">)</span>
<span class="n">projections</span><span class="o">.</span><span class="n">show_retrograde_projections</span><span class="p">(</span><span class="mi">607</span><span class="p">)</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">snapshot_to_notebook</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/synaptic_afferent_projections_3_0.png" src="_images/synaptic_afferent_projections_3_0.png" />
<p>To make the connected cells stand out from the rest we are going to
enable transparency on the scene. By default SynapticProjections assigns
a color with some transparency to non participating cells.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">rtneuron</span><span class="o">.</span><span class="n">sceneops</span><span class="o">.</span><span class="n">enable_transparency</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">snapshot_to_notebook</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/synaptic_afferent_projections_5_0.png" src="_images/synaptic_afferent_projections_5_0.png" />
<p>In this visualization the presynpatic cells are rendered in blue and in
soma only mode, while the postsynaptic cell is rendered in red with its
full morphology. It&#8217;s also possible to render presynaptic cells with
their full morphologies, but in this case, there&#8217;s the option of culling
the branches of the cells to show only the paths that connect the
presynatic somas to the postsynaptic soma. Actually this is the default
operation mode of SynpaticProjection, so we will create a new one using
the default parameters.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">projections</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">sceneops</span><span class="o">.</span><span class="n">SynapticProjections</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="n">projections</span><span class="o">.</span><span class="n">show_retrograde_projections</span><span class="p">(</span><span class="mi">607</span><span class="p">)</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">snapshot_to_notebook</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/synaptic_afferent_projections_7_0.png" src="_images/synaptic_afferent_projections_7_0.png" />
<p>Finally we will change some of the visual attributes of the presynaptic
and posynaptic neurons to emphasize the dendritic tree and the
disitribution of axonal processes.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Make the context cells less visible</span>
<span class="n">projections</span><span class="o">.</span><span class="n">set_unselected_color</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">])</span>
<span class="c1"># And make the post and presynaptic cells thicker.</span>
<span class="n">scene</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">inflatable_neurons</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">view</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">inflation_factor</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The representation of presynaptic cells can be modified so that the
color of the axon is a function of the distance to the soma postsynaptic
soma.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">attributes</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">AttributeMap</span><span class="p">()</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">ColorScheme</span><span class="o">.</span><span class="n">BY_DISTANCE_TO_SOMA</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">colormaps</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">AttributeMap</span><span class="p">()</span>
<span class="n">colormap</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">ColorMap</span><span class="p">()</span>
<span class="n">colormap</span><span class="o">.</span><span class="n">setPoints</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">500</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
                    <span class="mi">1000</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">1500</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">2000</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]})</span>
<span class="n">attributes</span><span class="o">.</span><span class="n">colormaps</span><span class="o">.</span><span class="n">by_distance_to_soma</span> <span class="o">=</span> <span class="n">colormap</span>
<span class="n">projections</span><span class="o">.</span><span class="n">set_presynaptic_attributes</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">snapshot_to_notebook</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/synaptic_afferent_projections_11_0.png" src="_images/synaptic_afferent_projections_11_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">by_distance</span> <span class="o">=</span> <span class="n">rtneuron</span><span class="o">.</span><span class="n">ColorMap</span><span class="p">()</span>
<span class="n">by_distance</span><span class="o">.</span><span class="n">setPoints</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">500</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
                       <span class="mi">1000</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">1500</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">2000</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]})</span>
<span class="n">view</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">inflation_factor</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">view</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">lod_bias</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
    <span class="n">c</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">by_distance</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">alpha</span>
    <span class="k">return</span> <span class="n">c</span>

<span class="n">t</span> <span class="o">=</span> <span class="mi">51</span>
<span class="k">def</span> <span class="nf">advance</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">t</span>
    <span class="n">colormap</span><span class="o">.</span><span class="n">setPoints</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                        <span class="n">t</span> <span class="o">-</span> <span class="mi">50</span><span class="p">:</span> <span class="n">color</span><span class="p">(</span><span class="n">t</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">t</span><span class="p">:</span> <span class="n">color</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">50</span><span class="p">:</span> <span class="n">color</span><span class="p">(</span><span class="n">t</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">)})</span>
    <span class="n">projections</span><span class="o">.</span><span class="n">set_presynaptic_attributes</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">+=</span> <span class="mi">50</span>
    <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mi">2000</span><span class="p">:</span>
        <span class="n">rtneuron</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">frameIssued</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">advance</span><span class="p">)</span>

<span class="n">rtneuron</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">frameIssued</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">advance</span><span class="p">)</span>
<span class="n">rtneuron</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/synaptic_afferent_projections.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">RTNeuron 3.0 Python API documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Cajal Blue Brain BBP/EPFL.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.
    </div>
  </body>
</html>