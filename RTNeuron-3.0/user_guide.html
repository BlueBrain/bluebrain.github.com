<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>RTNeuron: User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTNeuron
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('user_guide.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Table of contents</h1>
<ol type="1">
<li><a class="el" href="user_guide.html#Introduction">Introduction</a></li>
<li><a class="el" href="compilation.html">Building RTNeuron</a></li>
<li><a class="el" href="basics.html">Basic usage</a><ol type="a">
<li><a class="el" href="basics.html#starting_rtneuron">Starting RTNeuron</a></li>
<li><a class="el" href="basics.html#basic_concepts">Basic Concepts</a></li>
<li><a class="el" href="basics.html#command_line_scenes">Displaying objects using the command line</a></li>
<li><a class="el" href="basics.html#interpreter_scenes">Displaying objects using the Python shell</a><ol type="i">
<li><a class="el" href="basics.html#helper_functions_scenes">Helper Python functions to populate scenes</a></li>
<li><a class="el" href="basics.html#manual_scenes">Creating, populating and modifying scenes manually</a></li>
</ol>
</li>
<li><a class="el" href="basics.html#object_attributes">Scene object attributes</a></li>
<li><a class="el" href="basics.html#simulation">Displaying simulation</a></li>
<li><a class="el" href="basics.html#cameras">Camera handling</a><ol type="i">
<li><a class="el" href="basics.html#camera_object">The camera object</a></li>
<li><a class="el" href="basics.html#camera_paths">Camera paths</a></li>
<li><a class="el" href="basics.html#camera_manipulators">Camera manipulators</a></li>
</ol>
</li>
<li><a class="el" href="basics.html#movies">Frame capture and movie generation</a><ol type="i">
<li><a class="el" href="basics.html#cli_frame_grabbing">Frame capture from the command line</a></li>
<li><a class="el" href="basics.html#rtneuron_record">The RTNeuron.record function</a></li>
<li><a class="el" href="basics.html#view_frame_grabbing_api">View API for frame grabbing</a></li>
</ol>
</li>
</ol>
</li>
<li><a class="el" href="advanced.html">Advanced usage and recipes</a><ol type="a">
<li><a class="el" href="advanced.html#levels_of_detail">Levels of detail</a></li>
</ol>
</li>
</ol>
<h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>This guide explains RTNeuron features grouped by different themes and gives a series of recipes that show how those features are used in real examples: from basic circuit loading and display to how to setup the cameras and simulation playback to generate a high quality movie.</p>
<p>RTNeuron provides 4 main components:</p><ul>
<li>A <a href="python/index.html">Python module</a> that wraps the C++ library and provides additional tools.</li>
<li>The Python application script <code>rtneuron</code> </li>
<li>Some ready-made use-case specific apps with QML GUIs.</li>
<li>A high level <a href="annotated.html">C++ library</a>.</li>
</ul>
<p>A wide variety of scenarios is covered by <code>rtneuron</code>. When the user needs finer control on the rendering, such as in movie production or to speed up the exploration of different data sets, the Python wrapping is the way to go. The Python wrapping can be used through a IPython shell started directly from <code>rtneuron</code> or importing the module <code>rtneuron</code> into your own Python programs. The C++ library is not intended for regular users and will not be covered in this guide beyond the automatically generated doxygen reference.</p>
<p>RTNeuron makes uses of the Equalizer framework for rendering. This means that it is possible take advantage of multiple GPUs or even GPU-based clusters to speed up the rendering using parallel rendering techniques. This guide will cover only some basic aspects of the parallel rendering features as well as some other features provided by Equalizer which may be interesting to some users (such as off-screen rendering and stereoscopy).</p>
<p>If you do not have access to a precompiled version of RTNeuron you may refer to <a class="el" href="compilation.html">Building RTNeuron</a> for the instructions to build RTNeuron from source in your system. If you're going to work in one of the HBP/BBP clusters where RTNeuron is deployed, you just need to load the environmental module that provides it. Specific instructions for different clusters are provided below.</p>
<h2><a class="anchor" id="quick_start"></a>
Quick start</h2>
<p>This section assumes that you have already compiled RTNeuron or you have log in access to a machine where it is deployed as a module.</p>
<h3>If you have access to machine where RTNeuron is deployed</h3>
<p>The latest release version of RTNeuron is always provided in the BBP's BB5 system as a GNU environment module (built using the Nix packaging system). RTNeuron is also deployed in selected HBP sites for users with access rights. While we try to keep all versions up to date, the HBP deployments are not guaranteed to be always at the latest version.</p>
<p>Using RTNeuron in any of this machines requires remote rendering. The recommended solution to use is VirtualGL, as its server side components are installed in all systems. In ubuntu, VirtualGL can be directly installed with <code>apt</code> (<code>apt install virtualgl</code>). For other client systems refer to the official <a href="https://virtualgl.org">VirtualGL documentation</a>for installation instructions.</p>
<h4>Blue Brain V (BB5)</h4>
<p>To log into this cluster the recommended method is to use <code>vizsh</code>, this will setup the necessary environment for you. You can check the <a href="https://bbpteam.epfl.ch/project/spaces/display/INFRA/Analysis+and+Visualization+Cluster"><code>vizsh</code> documentation</a> for details. All BBP desktop systems handled by puppet have <code>vizsh</code> already installed, otherwise contact the system admins. For basic purposes, the login command is <code>vizsh --account=<em>projID</em></code>. If you need exclusive access to one node use <code>vizsh -n 1</code>. Allocations will take place on UC2 nodes.</p>
<p>If <code>vizsh</code> does not work for you or is not available in your machine, you can also connect to a front-end node and allocate an interactive job where RTNeuron can be run. The instructions to do it are:</p>
<pre class="fragment">$ ssh bbpv1 # or bbpv2
you@bbpv1$ salloc --constrain=uc2 --gres=gpu:1 -p interactive --account=projID
you@rxyz$ # The node varies

Then, from another shell in the client machine
$ vglconnect node_xyz
you@rxyz$
This is the shell from which RTNeuron must be launched</pre><p>Once logged, RTNeuron can be accessed using nix shell commands or as a GNU environmental module. For simplicity, only the latter method is described. To load RTNeuron into your environment type:</p>
<pre class="fragment">module purge
module load nix/viz/rtneuron
</pre><h4>Galileo</h4>
<p>The recommended way of accessing the system is through <a href="https://wiki.u-gov.it/confluence/pages/viewpage.action?pageId=68391634">RCM</a>, a tool provided by Cineca to establish VNC connections to their systems. Please consult the site administrators for details about using this tool. Once logged in, type the following commands to bring RTNeuron into your shell environment:</p>
<pre class="fragment">module use /gpfs/work/HBP_CDP21_it_1/HBP/galileo/modules/nix/share/modulefiles
module purge
module load nix/viz/rtneuron
</pre><p>The load command will print some warnings that can be safely ignored.</p>
<h4>Jureca</h4>
<p>The recommended way of accessing the system is through strudel, a tool provided by Julich to establish VNC connections to their systems. Please consult the site administrators for details about using this tool. Once logged in, type the following commands to bring RTNeuron into your shell environment:</p>
<pre class="fragment">module use /work/vsk25/vsk2518/HBP/jurecavis/modules/nix/share/modulefiles;
export LD_LIBRARY_PATH=/usr/lib64/nvidia:$LD_LIBRARY_PATH
module purge
module load nix/viz/rtneuron
</pre><h3>Once RTNeuron is installed/ready to use</h3>
<p>From a shell console run <code>rtneuron</code> or <code>vglrun rtneuron</code> if you are remotely connected to another machine (the command <code>vglrun</code> is a wrapper provided by VirtualGL for remote rendering and is also necessary for VNC sessions).</p>
<p>The IPython shell prompt should appear after a welcome message. In the IPython shell type: </p><pre class="fragment">In [1]: display_circuit('path/to/simulation/config', 'target_name')
</pre><p> The same result can be obtained using just command line parameters: </p><pre class="fragment">$ rtneuron -b /path/to/blue/config --target target_name
</pre><p> If you want to play with a scene loaded from the command line add the option <code>--shell</code> and the IPython shell will be started after the scene is rendered.</p>
<div class="image">
<img src="circuit_slicing.png" alt="circuit_slicing.png"/>
<div class="caption">
The default app</div></div>
<p>You can also use: </p><pre class="fragment">$ rtneuron --app [app_name]
</pre><p> to start any of the existing use-case specific apps. Apps can also be started from the Python console by calling <code>start_app()</code>. Type <code>rtneuron --app help</code> to get the list of available apps. The default app allows to load a circuit and inspecting its composition by picking cell subsets and applying different colors to them. Compartment and spike simulation reports can also be played back. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Documentation</a></li>
    <li class="footer">Generated on Wed Dec 5 2018 07:19:13 for RTNeuron by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
