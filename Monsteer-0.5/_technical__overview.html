<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Monsteer: Technical Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Monsteer
   &#160;<span id="projectnumber">0.5.0</span>
   </div>
   <div id="projectbrief">Interactive Supercomputing - Monitoring and Steering for NEST simulations</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_technical__overview.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Technical Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Technical_Overview">Technical Overview</a></li>
<li class="level1"><a href="#NEST_Simulator">NEST Neural Network Simulator</a></li>
<li class="level1"><a href="#Music_Library">MUSIC Library</a></li>
<li class="level1"><a href="#Brion_Library">Brion Library</a></li>
<li class="level1"><a href="#Brion_Spikes">Brion Spikes</a></li>
<li class="level1"><a href="#Music_Proxy">Music Proxy</a><ul><li class="level2"><a href="#Music_Proxy_Spike_Event_Handler">Spike Event Handler</a></li>
<li class="level2"><a href="#Spike_Streaming">Spike Streaming</a></li>
<li class="level2"><a href="#Music_Proxy_Steering_Handler">Steering Handler</a></li>
</ul>
</li>
<li class="level1"><a href="#BBPSDK_Simulation">BBPSDK Simulation Controller</a></li>
<li class="level1"><a href="#Nesteer">Nesteer: A Python interface for processing the steering messages</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="Technical_Overview"></a>
Technical Overview</h1>
<p>The Monsteer library helps users setting up loosely coupled simulation-observer/controller pairs in an easy manner. After the integration of all the components, users can interact with a simulation both for streaming events from it and steering any of its parameters.</p>
<p>To accomplish this task, Monsteer provides: Brion plugins for spike data streaming, a Python interface to steer the simulator and a bridging application between the user and the simulator.</p>
<p>At the moment, Monsteer only offers support for the NEST simulator which is mainly used by the Neurobotics group in the BlueBrain project. Despite this limitation, all the Monsteer components were developed thinking on their reusability with other simulators such as Neuron.</p>
<p>For example, Monsteer is based on the plugin mechanism provided by Brion, where the interface of spike streaming is defined. By using different schemes, developers have the ability of implementing different spike readers/writers. These are all interfaced through the BBPSDK API, where the exposed interface is common for all the spike stream processes. As a result, for users it is transparent to use different spike sources where they only have to provide different spike readers or writers. These mechanisms are already used to stream and read file data from NEST and Neuron simulators by just using different schemes.</p>
<p>A general overview of the Monsteer project can be seen below.</p>
<div class="image">
<img src="general_overview.png" alt="general_overview.png"/>
<div class="caption">
General Overview</div></div>
 <h1><a class="anchor" id="NEST_Simulator"></a>
NEST Neural Network Simulator</h1>
<p>NEST is a large-scale neural network simulator that can be run on distributed computing environments. The data flow in the distributed running environment is mainly based on the MPI library. Different NEST processes can either share data either by just using MPI, or through the <a class="el" href="_technical__overview.html#Music_Library">MUSIC Library</a>, a library that facilitates the unification of different simulators using a common interface.</p>
<p>Monsteer uses the MUSIC interface integrated in the NEST simulator for steering and streaming. The functionalities are exposed in the Python interface of the simulator. This interface allows the Python classes, namely <a class="el" href="_user__guide.html#Nesteer">Nesteer: A Python interface for processing the steering messages</a>, to be developed in order to provide support for sending and receiving steering messages and spike events.</p>
<h1><a class="anchor" id="Music_Library"></a>
MUSIC Library</h1>
<p>MUSIC is a well-known data exchange library for neural simulators such as NEST, Neuron and Moose. It can connect large scale neural networks and has an easy interface for coupling applications with the simulators.</p>
<p>Using static configurations between applications which are running at different speeds, the MUSIC library is capable of synchronizing data by employing internal buffering and synchronization mechanisms. Developers using MUSIC to build such applications are abstracted from this synchronization mechanisms, making the development process easier rather than doing it by low-level MPI calls.</p>
<p>MUSIC is used in the Music Proxy application to receive spikes from a NEST simulator and to communicate the steering messages to and from the simulator. The underlying mechanisms in the library helped the proxy application to be developed in an very flexible way, also making it easily extensible to make the coupling with other libraries.</p>
<h1><a class="anchor" id="Brion_Library"></a>
Brion Library</h1>
<p>Brion provides many additional plugins and plugin interfaces for accessing BlueBrain project data. This data includes neuron structures, neuron placements, simulation results, meshes, etc. The plugins in this library are activated by a scheme, where a scheme can also be a file extension rather than a fully qualified URL.</p>
<p>Monsteer provides a standalone spike reader and writer plugin for Brion. This plugin is automatically registered by Brion at runtime and can be instanciated by passing a "monsteer://" URI to the brion::SpikeReport constructor.</p>
<h1><a class="anchor" id="Brion_Spikes"></a>
Brion Spikes</h1>
<p>Spike events are one of the main simulation results where visualization and analysis is important for neuroscientists. A spike event is a binary event which takes place in a neuron on a certain time within the simulation, when neuron passes a certain voltage threshold. This spike event can be represented as a timestamp and a neuron identifier. In Brion and Monsteer, there is support for internal BBP data formats, NEST file formats and streaming formats.</p>
<h1>ZeroEQ: Auto-discovery and Event Based Data Sharing Library</h1>
<p>The ZeroEQ library is used for auto-discovery of services, data transport and event based messaging. The auto-discovery and data transport are done through the ZeroMQ library, where in lack of auto-discovery, it is also possible to target a host with a given port. The messages are based on FLATBuffers scheme which enforces the messages to be well-defined. On top of these libraries, ZeroEQ provides an URI-based auto-discovery, event listening and event registration layers. In ZeroEQ the events form a vocabulary for a given scheme and can easily be extended.</p>
<p>Two ends of the connection in ZeroEQ is a publisher and subscriber pair. When auto-discovery is possible, a publisher announces its scheme to the outer world in the network and subscribers interested with this scheme can connect to this publisher.</p>
<p>When auto-discovery is not available or is not requested by the subscriber, it is also possible to provide a specific host and port in the scheme. This way, a connection to a known publisher can be established.</p>
<p>In Monsteer, ZeroEQ is used for: sending spike events from Music Proxy to the steering application, sending steering messages from the steering application and sending information messages from the simulator. Each item introduces a scheme, its own vocabulary and consequently its own events.</p>
<h1><a class="anchor" id="Music_Proxy"></a>
Music Proxy</h1>
<p>The Music Proxy acts as a bridge between the simulation and the user application, making use of MUSIC communicate steering messages between both components, as well as receiving spike events from the simulation in order to send them later to the user application.</p>
<p>The application is composed of two main components: the MUSIC spike event handler and the MUSIC steering handler. Within the application, these components are synchronized on the same loop to send and receive data.</p>
<p>A general overview of the Music Proxy and its software components can be seen below.</p>
<div class="image">
<img src="detailed_music_proxy.png" alt="detailed_music_proxy.png"/>
<div class="caption">
Music Proxy</div></div>
 <h2><a class="anchor" id="Music_Proxy_Spike_Event_Handler"></a>
Spike Event Handler</h2>
<p>The spike event handler is responsible for receiving the spike events and forwarding them to the application using the ZeroEQ library. MUSIC has mechanisms to register for spike events and using the synchronization mechanisms available in the library, these events are captured and translated into the spike data format used in Brion.</p>
<h2><a class="anchor" id="Spike_Streaming"></a>
Spike Streaming</h2>
<p>The spike event reader and writer interfaces are declared in Brion. The necessary structures for reading/writing files and streaming spikes are developed within the Brion and Monsteer libraries.</p>
<p>Monsteer provides a spike streaming plugin based on the ZeroEQ library to transfer events from one end to another. Both endpoints, the publisher and the subscriber, can generally rely on ZeroEQ's auto-discovery mechanism to automatically connect to each other. Otherwise, it is also possible to pass a specific host and port to the brion::SpikeReport plugin constructor. Please refer to the ZeroEQ documentation if you want to learn more about the connection mechanism and its filtering options.</p>
<h2><a class="anchor" id="Music_Proxy_Steering_Handler"></a>
Steering Handler</h2>
<p>The steering handling is based on two main components. The first component forwards steering messages from the steering application to the NEST simulation. The receipt of steering messages is handled through the ZeroEQ library and the forwarded messages are sent through the MUSIC library.</p>
<p>The second component receives messages from the NEST simulation and forwards them to the steering application. Messages are received from the NEST simulation through the MUSIC library, and sent to the user application through ZeroEQ.</p>
<h1><a class="anchor" id="BBPSDK_Simulation"></a>
BBPSDK Simulation Controller</h1>
<p>BBPSDK is a basic library for accessing the BlueBrain data. It can read spike reports, compartment reports, meshes, neuron structures, their placements, etc. It provides a complete user API and their Python wrappings where the implementations are generally plugins. The right plugin is selected based on a given scheme. These plugins are generally located in Brion library and can easily be extended by 3rd party libraries. Monsteer library is one of the libraries that provides plugins for the Monsteer scheme.</p>
<p>For users to steer a simulation easily, a new functionality was added in the BBPSDK library. The functionality is abstracted from the underlying simulator using the plugin mechanism. At the moment there is only one plugin in Monsteer for steering NEST simulations, but for the future new functionalities can be added for different simulators such as Neuron. With the simulator interface, a user can inject stimuli into a running simulation, play and pause the simulation and receive additional information from it.</p>
<p>The functionality added in BBPSDK was also wrapped in Python to make it more useful for applications that have a Python interface i.e: RTNeuron. Later, the Python wrapping will be extended for the NEST use case in monsteer.</p>
<p>A general overview of the BBPSDK Simulation Controller and its software components can be seen below.</p>
<div class="image">
<img src="detailed_steering_streaming.png" alt="detailed_steering_streaming.png"/>
<div class="caption">
Controlling the simulation</div></div>
 <h1><a class="anchor" id="Nesteer"></a>
Nesteer: A Python interface for processing the steering messages</h1>
<p>NEST users generally use a Python shell for constructing and running their simulations. If at some point they want to add steering and streaming capabilities to their simulation, Monsteer can facilitate this process by providing a Python object to process the received messages. Using the provided Python object, a user can easily define what to do when a steering message is received by providing new functions for certain events.</p>
<p>Nesteer provides internal mechanisms to setup the MUSIC communication channels and connect the neurons. For its use with BBP data, it provides a mapping between NEST neuron ids and BBP circuit neuron ids. That way, users can transparently work with BBP circuits.</p>
<div class="image">
<img src="detailed_nest_simulation.png" alt="detailed_nest_simulation.png"/>
<div class="caption">
Nesteer and NEST</div></div>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jun 15 2016 00:53:52 for Monsteer by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
