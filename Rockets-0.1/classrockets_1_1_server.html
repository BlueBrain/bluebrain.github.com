<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Rockets: rockets::Server Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rockets
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Rockets - REST and websockets C++ library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classrockets_1_1_server.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="classrockets_1_1_server-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rockets::Server Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Serves HTTP requests and Websockets connections.  
 <a href="classrockets_1_1_server.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="server_8h_source.html">server.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for rockets::Server:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server__inherit__graph.png" border="0" usemap="#rockets_1_1_server_inherit__map" alt="Inheritance graph"/></div>
<map name="rockets_1_1_server_inherit__map" id="rockets_1_1_server_inherit__map">
<area shape="rect" id="node2" href="classrockets_1_1_socket_based_interface.html" title="Base class for all socket&#45;based interfaces (clients and server). " alt="" coords="5,6,240,143"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for rockets::Server:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server__coll__graph.png" border="0" usemap="#rockets_1_1_server_coll__map" alt="Collaboration graph"/></div>
<map name="rockets_1_1_server_coll__map" id="rockets_1_1_server_coll__map">
<area shape="rect" id="node2" href="classrockets_1_1_socket_based_interface.html" title="Base class for all socket&#45;based interfaces (clients and server). " alt="" coords="5,6,240,143"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Setup</div></td></tr>
<tr class="memitem:ac3881cb8cadc9a57c994d9ddd4bceeac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#ac3881cb8cadc9a57c994d9ddd4bceeac">Server</a> (const std::string &amp;uri, const std::string &amp;name, unsigned int threadCount=0)</td></tr>
<tr class="memdesc:ac3881cb8cadc9a57c994d9ddd4bceeac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new server.  <a href="#ac3881cb8cadc9a57c994d9ddd4bceeac">More...</a><br /></td></tr>
<tr class="separator:ac3881cb8cadc9a57c994d9ddd4bceeac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6222b78e3375341ef8a6efb6cf7eb7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e6222b78e3375341ef8a6efb6cf7eb7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Server</b> (unsigned int threadCount=0)</td></tr>
<tr class="separator:a8e6222b78e3375341ef8a6efb6cf7eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42722cecccc10162920debf9aaf013ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a42722cecccc10162920debf9aaf013ec">~Server</a> ()</td></tr>
<tr class="memdesc:a42722cecccc10162920debf9aaf013ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate the server.  <a href="#a42722cecccc10162920debf9aaf013ec">More...</a><br /></td></tr>
<tr class="separator:a42722cecccc10162920debf9aaf013ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b8077fbf83e41560e1193b98449144"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#ac5b8077fbf83e41560e1193b98449144">getURI</a> () const </td></tr>
<tr class="separator:ac5b8077fbf83e41560e1193b98449144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885b592db3418b36ee5f5a148111d75f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a885b592db3418b36ee5f5a148111d75f">getPort</a> () const </td></tr>
<tr class="separator:a885b592db3418b36ee5f5a148111d75f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ceff57f8a07703f649a011283081fd"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#aa5ceff57f8a07703f649a011283081fd">getThreadCount</a> () const </td></tr>
<tr class="separator:aa5ceff57f8a07703f649a011283081fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa471f0640af5e55ea1f88ce8357243e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#aa471f0640af5e55ea1f88ce8357243e6">setHttpFilter</a> (const <a class="el" href="classrockets_1_1http_1_1_filter.html">http::Filter</a> *filter)</td></tr>
<tr class="memdesc:aa471f0640af5e55ea1f88ce8357243e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a filter for HTTP requests.  <a href="#aa471f0640af5e55ea1f88ce8357243e6">More...</a><br /></td></tr>
<tr class="separator:aa471f0640af5e55ea1f88ce8357243e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">HTTP functionality</div></td></tr>
<tr class="memitem:ae9deac0c145f89092a34b21e28e7d730"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#ae9deac0c145f89092a34b21e28e7d730">handle</a> (http::Method method, const std::string &amp;endpoint, http::RESTFunc func)</td></tr>
<tr class="memdesc:ae9deac0c145f89092a34b21e28e7d730"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a single method on a given endpoint.  <a href="#ae9deac0c145f89092a34b21e28e7d730">More...</a><br /></td></tr>
<tr class="separator:ae9deac0c145f89092a34b21e28e7d730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63bdb8fa3afa55a17e28f73e8232403c"><td class="memTemplParams" colspan="2">template&lt;typename Obj &gt; </td></tr>
<tr class="memitem:a63bdb8fa3afa55a17e28f73e8232403c"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c">handle</a> (const std::string &amp;endpoint, Obj &amp;object)</td></tr>
<tr class="memdesc:a63bdb8fa3afa55a17e28f73e8232403c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a JSON-serializable object.  <a href="#a63bdb8fa3afa55a17e28f73e8232403c">More...</a><br /></td></tr>
<tr class="separator:a63bdb8fa3afa55a17e28f73e8232403c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8381000400b391697793b87108636f41"><td class="memTemplParams" colspan="2">template&lt;typename Obj &gt; </td></tr>
<tr class="memitem:a8381000400b391697793b87108636f41"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a8381000400b391697793b87108636f41">handleGET</a> (const std::string &amp;endpoint, Obj &amp;object)</td></tr>
<tr class="memdesc:a8381000400b391697793b87108636f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expose a JSON-serializable object.  <a href="#a8381000400b391697793b87108636f41">More...</a><br /></td></tr>
<tr class="separator:a8381000400b391697793b87108636f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf01ade9b3730d342aa632d03e22fc8"><td class="memTemplParams" colspan="2">template&lt;typename Obj &gt; </td></tr>
<tr class="memitem:a8cf01ade9b3730d342aa632d03e22fc8"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT</a> (const std::string &amp;endpoint, Obj &amp;object)</td></tr>
<tr class="memdesc:a8cf01ade9b3730d342aa632d03e22fc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe a JSON-deserializable object.  <a href="#a8cf01ade9b3730d342aa632d03e22fc8">More...</a><br /></td></tr>
<tr class="separator:a8cf01ade9b3730d342aa632d03e22fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1f56d98dbc47a5442830f7ce774359"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a4e1f56d98dbc47a5442830f7ce774359">remove</a> (const std::string &amp;endpoint)</td></tr>
<tr class="memdesc:a4e1f56d98dbc47a5442830f7ce774359"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all handling for a given endpoint.  <a href="#a4e1f56d98dbc47a5442830f7ce774359">More...</a><br /></td></tr>
<tr class="separator:a4e1f56d98dbc47a5442830f7ce774359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Websockets functionality</div></td></tr>
<tr class="memitem:a7b37b68e2b3adc1c6145f9b907c73ecc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a7b37b68e2b3adc1c6145f9b907c73ecc">handleOpen</a> (ws::ConnectionCallback callback)</td></tr>
<tr class="memdesc:a7b37b68e2b3adc1c6145f9b907c73ecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback for handling incoming connections.  <a href="#a7b37b68e2b3adc1c6145f9b907c73ecc">More...</a><br /></td></tr>
<tr class="separator:a7b37b68e2b3adc1c6145f9b907c73ecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7969ed5dd17b41dcff37d9dea246540d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a7969ed5dd17b41dcff37d9dea246540d">handleClose</a> (ws::ConnectionCallback callback)</td></tr>
<tr class="memdesc:a7969ed5dd17b41dcff37d9dea246540d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback for handling closing connections.  <a href="#a7969ed5dd17b41dcff37d9dea246540d">More...</a><br /></td></tr>
<tr class="separator:a7969ed5dd17b41dcff37d9dea246540d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab147975dcd9e4db242742e2f3ccce19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#aab147975dcd9e4db242742e2f3ccce19">handleText</a> (ws::MessageCallback callback)</td></tr>
<tr class="memdesc:aab147975dcd9e4db242742e2f3ccce19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback for handling text messages from websocket clients.  <a href="#aab147975dcd9e4db242742e2f3ccce19">More...</a><br /></td></tr>
<tr class="separator:aab147975dcd9e4db242742e2f3ccce19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebcb3ca363f2905c36a5decf7ab4eff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#abebcb3ca363f2905c36a5decf7ab4eff">handleText</a> (ws::MessageCallbackAsync callback)</td></tr>
<tr class="memdesc:abebcb3ca363f2905c36a5decf7ab4eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback for handling text messages from websocket clients.  <a href="#abebcb3ca363f2905c36a5decf7ab4eff">More...</a><br /></td></tr>
<tr class="separator:abebcb3ca363f2905c36a5decf7ab4eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e861b40b5102a23faf791d5599d2d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a58e861b40b5102a23faf791d5599d2d2">handleBinary</a> (ws::MessageCallback callback)</td></tr>
<tr class="memdesc:a58e861b40b5102a23faf791d5599d2d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback for handling binray messages from websocket clients.  <a href="#a58e861b40b5102a23faf791d5599d2d2">More...</a><br /></td></tr>
<tr class="separator:a58e861b40b5102a23faf791d5599d2d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adef924d8b528f676624829c7338fd68c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#adef924d8b528f676624829c7338fd68c">broadcastText</a> (const std::string &amp;message)</td></tr>
<tr class="memdesc:adef924d8b528f676624829c7338fd68c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcast a text message to all websocket clients.  <a href="#adef924d8b528f676624829c7338fd68c">More...</a><br /></td></tr>
<tr class="separator:adef924d8b528f676624829c7338fd68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d65987936937965bd0dcfba361a09c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0d65987936937965bd0dcfba361a09c1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a0d65987936937965bd0dcfba361a09c1">broadcastText</a> (const std::string &amp;message, const std::set&lt; uintptr_t &gt; &amp;filter)</td></tr>
<tr class="memdesc:a0d65987936937965bd0dcfba361a09c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcast a text message to all websocket clients, except the filtered ones. <br /></td></tr>
<tr class="separator:a0d65987936937965bd0dcfba361a09c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9165a17b2ee66ff8978c3d4c08a7125e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a9165a17b2ee66ff8978c3d4c08a7125e">broadcastBinary</a> (const char *data, size_t size)</td></tr>
<tr class="memdesc:a9165a17b2ee66ff8978c3d4c08a7125e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcast a binary message to all websocket clients.  <a href="#a9165a17b2ee66ff8978c3d4c08a7125e">More...</a><br /></td></tr>
<tr class="separator:a9165a17b2ee66ff8978c3d4c08a7125e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c47d48b0ce7925e8207e16839cafca"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_server.html#a18c47d48b0ce7925e8207e16839cafca">getConnectionCount</a> () const </td></tr>
<tr class="separator:a18c47d48b0ce7925e8207e16839cafca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classrockets_1_1_socket_based_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classrockets_1_1_socket_based_interface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classrockets_1_1_socket_based_interface.html">rockets::SocketBasedInterface</a></td></tr>
<tr class="memitem:a43aa9c625c9f69b26583ce01e511e6e2 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_socket_based_interface.html#a43aa9c625c9f69b26583ce01e511e6e2">setSocketListener</a> (<a class="el" href="classrockets_1_1_socket_listener.html">SocketListener</a> *listener)</td></tr>
<tr class="memdesc:a43aa9c625c9f69b26583ce01e511e6e2 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a listener for integrating the server in an external poll array.  <a href="#a43aa9c625c9f69b26583ce01e511e6e2">More...</a><br /></td></tr>
<tr class="separator:a43aa9c625c9f69b26583ce01e511e6e2 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0200deb463dbce66fc8bc4fcdf96353 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_socket_based_interface.html#ae0200deb463dbce66fc8bc4fcdf96353">processSocket</a> (const SocketDescriptor fd, const int events)</td></tr>
<tr class="memdesc:ae0200deb463dbce66fc8bc4fcdf96353 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process pending data on a given socket.  <a href="#ae0200deb463dbce66fc8bc4fcdf96353">More...</a><br /></td></tr>
<tr class="separator:ae0200deb463dbce66fc8bc4fcdf96353 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba549a192dd24a91308837c5192a8b22 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrockets_1_1_socket_based_interface.html#aba549a192dd24a91308837c5192a8b22">process</a> (int timeout_ms)</td></tr>
<tr class="memdesc:aba549a192dd24a91308837c5192a8b22 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process all sockets using the internal poll array.  <a href="#aba549a192dd24a91308837c5192a8b22">More...</a><br /></td></tr>
<tr class="separator:aba549a192dd24a91308837c5192a8b22 inherit pub_methods_classrockets_1_1_socket_based_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Serves HTTP requests and Websockets connections. </p>
<p>Not thread safe.</p>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="comment">/* Copyright (c) 2017-2018, EPFL/Blue Brain Project</span></div><div class="line"><span class="comment"> *                          Raphael.Dumusc@epfl.ch</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * This file is part of Rockets &lt;https://github.com/BlueBrain/Rockets&gt;</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><span class="comment"> * modification, are permitted provided that the following conditions are met:</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * - Redistributions of source code must retain the above copyright notice, this</span></div><div class="line"><span class="comment"> *   list of conditions and the following disclaimer.</span></div><div class="line"><span class="comment"> * - Redistributions in binary form must reproduce the above copyright notice,</span></div><div class="line"><span class="comment"> *   this list of conditions and the following disclaimer in the documentation</span></div><div class="line"><span class="comment"> *   and/or other materials provided with the distribution.</span></div><div class="line"><span class="comment"> * - Neither the name of Blue Brain Project / EPFL nor the names of its</span></div><div class="line"><span class="comment"> *   contributors may be used to endorse or promote products derived from this</span></div><div class="line"><span class="comment"> *   software without specific prior written permission.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></div><div class="line"><span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></div><div class="line"><span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span></div><div class="line"><span class="comment"> * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span></div><div class="line"><span class="comment"> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span></div><div class="line"><span class="comment"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span></div><div class="line"><span class="comment"> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span></div><div class="line"><span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div><div class="line"><span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span></div><div class="line"><span class="comment"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div><div class="line"><span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;rockets/jsonrpc/http.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;rockets/jsonrpc/server.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;rockets/server.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;rockets/json.hpp&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;cstdio&gt;</span> <span class="comment">// std::snprintf</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span> <span class="comment">// ctrl-c handler</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacerockets.html">rockets</a>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> std::string htmlPage{</div><div class="line">    R<span class="stringliteral">&quot;HTMLCONTENT(&lt;html&gt;</span></div><div class="line"><span class="stringliteral">    &lt;head&gt;</span></div><div class="line"><span class="stringliteral">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span></div><div class="line"><span class="stringliteral">        &lt;title&gt;Rockets Websocket Echo Client&lt;/title&gt;</span></div><div class="line"><span class="stringliteral">    &lt;/head&gt;</span></div><div class="line"><span class="stringliteral">    &lt;body&gt;</span></div><div class="line"><span class="stringliteral">        &lt;h1&gt;Rockets Websocket Echo Client&lt;/h1&gt;</span></div><div class="line"><span class="stringliteral">        &lt;p&gt;</span></div><div class="line"><span class="stringliteral">            &lt;button onClick=&quot;initWebSocket();&quot;&gt;Connect&lt;/button&gt;</span></div><div class="line"><span class="stringliteral">            &lt;button onClick=&quot;stopWebSocket();&quot;&gt;Disconnect&lt;/button&gt;</span></div><div class="line"><span class="stringliteral">            &lt;button onClick=&quot;checkSocket();&quot;&gt;State&lt;/button&gt;</span></div><div class="line"><span class="stringliteral">        &lt;/p&gt;</span></div><div class="line"><span class="stringliteral">        &lt;p&gt;</span></div><div class="line"><span class="stringliteral">            &lt;textarea id=&quot;debugTextArea&quot;</span></div><div class="line"><span class="stringliteral">                      style=&quot;width:400px;height:200px;&quot;&gt;&lt;/textarea&gt;</span></div><div class="line"><span class="stringliteral">        &lt;/p&gt;</span></div><div class="line"><span class="stringliteral">        &lt;p&gt;</span></div><div class="line"><span class="stringliteral">            &lt;input type=&quot;text&quot; id=&quot;inputText&quot;</span></div><div class="line"><span class="stringliteral">                   onkeydown=&quot;if(event.keyCode==13)sendMessage();&quot;/&gt;</span></div><div class="line"><span class="stringliteral">            &lt;button onClick=&quot;sendMessage();&quot;&gt;Send&lt;/button&gt;</span></div><div class="line"><span class="stringliteral">        &lt;/p&gt;</span></div><div class="line"><span class="stringliteral">        &lt;script type=&quot;text/javascript&quot;&gt;</span></div><div class="line"><span class="stringliteral">            var wsUri = &quot;ws://%s&quot;;</span></div><div class="line"><span class="stringliteral">            var wsProtocol = &quot;%s&quot;;</span></div><div class="line"><span class="stringliteral">            var websocket = null;</span></div><div class="line"><span class="stringliteral">            var debugTextArea = document.getElementById(&quot;debugTextArea&quot;);</span></div><div class="line"><span class="stringliteral">            var jsonrpc = %s;</span></div><div class="line"><span class="stringliteral">            var requestId = 0;</span></div><div class="line"><span class="stringliteral">            function debug(message) {</span></div><div class="line"><span class="stringliteral">                debugTextArea.value += message + &quot;\n&quot;;</span></div><div class="line"><span class="stringliteral">                debugTextArea.scrollTop = debugTextArea.scrollHeight;</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">            function jsonrpcEchoRequest(params) {</span></div><div class="line"><span class="stringliteral">                var obj = {jsonrpc: &#39;2.0&#39;, method: &#39;echo&#39;, id: requestId++};</span></div><div class="line"><span class="stringliteral">                obj[&#39;params&#39;] = {message: params}</span></div><div class="line"><span class="stringliteral">                return JSON.stringify(obj);</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">            function sendMessage() {</span></div><div class="line"><span class="stringliteral">                var msg = document.getElementById(&quot;inputText&quot;).value;</span></div><div class="line"><span class="stringliteral">                document.getElementById(&quot;inputText&quot;).value = &quot;&quot;;</span></div><div class="line"><span class="stringliteral">                if (websocket != null)</span></div><div class="line"><span class="stringliteral">                {</span></div><div class="line"><span class="stringliteral">                    if (jsonrpc)</span></div><div class="line"><span class="stringliteral">                        websocket.send(jsonrpcEchoRequest(msg));</span></div><div class="line"><span class="stringliteral">                    else</span></div><div class="line"><span class="stringliteral">                        websocket.send(msg);</span></div><div class="line"><span class="stringliteral">                    debug(&#39;=&gt; &quot;&#39; + msg + &#39;&quot;&#39;);</span></div><div class="line"><span class="stringliteral">                }</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">            function initWebSocket() {</span></div><div class="line"><span class="stringliteral">                try {</span></div><div class="line"><span class="stringliteral">                    if (typeof MozWebSocket == &#39;function&#39;)</span></div><div class="line"><span class="stringliteral">                        WebSocket = MozWebSocket;</span></div><div class="line"><span class="stringliteral">                    if (websocket &amp;&amp; websocket.readyState == 1)</span></div><div class="line"><span class="stringliteral">                        websocket.close();</span></div><div class="line"><span class="stringliteral">                    websocket = new WebSocket(wsUri, wsProtocol);</span></div><div class="line"><span class="stringliteral">                    websocket.onopen = function (evt) {</span></div><div class="line"><span class="stringliteral">                        debug(&quot;CONNECTED&quot;);</span></div><div class="line"><span class="stringliteral">                    };</span></div><div class="line"><span class="stringliteral">                    websocket.onclose = function (evt) {</span></div><div class="line"><span class="stringliteral">                        debug(&quot;DISCONNECTED&quot;);</span></div><div class="line"><span class="stringliteral">                    };</span></div><div class="line"><span class="stringliteral">                    websocket.onmessage = function (event) {</span></div><div class="line"><span class="stringliteral">                        if (jsonrpc) {</span></div><div class="line"><span class="stringliteral">                            var obj = JSON.parse(event.data);</span></div><div class="line"><span class="stringliteral">                            if (obj.hasOwnProperty(&#39;error&#39;)) {</span></div><div class="line"><span class="stringliteral">                                var err = obj[&#39;error&#39;];</span></div><div class="line"><span class="stringliteral">                                var msg = err[&#39;code&#39;] + &#39; - &#39; + err[&#39;message&#39;];</span></div><div class="line"><span class="stringliteral">                            }</span></div><div class="line"><span class="stringliteral">                            else if (obj.hasOwnProperty(&#39;result&#39;)) {</span></div><div class="line"><span class="stringliteral">                                var msg = obj[&#39;result&#39;];</span></div><div class="line"><span class="stringliteral">                            }</span></div><div class="line"><span class="stringliteral">                        } else {</span></div><div class="line"><span class="stringliteral">                            var msg = event.data;</span></div><div class="line"><span class="stringliteral">                        }</span></div><div class="line"><span class="stringliteral">                        debug(&#39;&lt;= &quot;&#39; + msg + &#39;&quot;&#39;);</span></div><div class="line"><span class="stringliteral">                    };</span></div><div class="line"><span class="stringliteral">                    websocket.onerror = function (evt) {</span></div><div class="line"><span class="stringliteral">                        debug(&#39;ERROR: &#39; + evt.data);</span></div><div class="line"><span class="stringliteral">                    };</span></div><div class="line"><span class="stringliteral">                } catch (exception) {</span></div><div class="line"><span class="stringliteral">                    debug(&#39;ERROR: &#39; + exception);</span></div><div class="line"><span class="stringliteral">                }</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">            function stopWebSocket() {</span></div><div class="line"><span class="stringliteral">                if (websocket)</span></div><div class="line"><span class="stringliteral">                    websocket.close();</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">            function getAsString(readyState) {</span></div><div class="line"><span class="stringliteral">                switch (readyState) {</span></div><div class="line"><span class="stringliteral">                    case 0: return &quot;CONNECTING&quot;;</span></div><div class="line"><span class="stringliteral">                    case 1: return &quot;OPEN&quot;;</span></div><div class="line"><span class="stringliteral">                    case 2: return &quot;CLOSING&quot;;</span></div><div class="line"><span class="stringliteral">                    case 3: return &quot;CLOSED&quot;;</span></div><div class="line"><span class="stringliteral">                    default: return &quot;UNKNOW&quot;;</span></div><div class="line"><span class="stringliteral">                }</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">            function checkSocket() {</span></div><div class="line"><span class="stringliteral">                if (websocket != null) {</span></div><div class="line"><span class="stringliteral">                    var stateStr = getAsString(websocket.readyState);</span></div><div class="line"><span class="stringliteral">                    debug(&quot;WebSocket state: &quot; + stateStr);</span></div><div class="line"><span class="stringliteral">                } else {</span></div><div class="line"><span class="stringliteral">                    debug(&quot;WebSocket is null&quot;);</span></div><div class="line"><span class="stringliteral">                }</span></div><div class="line"><span class="stringliteral">            }</span></div><div class="line"><span class="stringliteral">        &lt;/script&gt;</span></div><div class="line"><span class="stringliteral">    &lt;/body&gt;</span></div><div class="line"><span class="stringliteral">&lt;/html&gt;</span></div><div class="line"><span class="stringliteral">)HTMLCONTENT&quot;};</span></div><div class="line"><span class="stringliteral"></span></div><div class="line"><span class="stringliteral"></span><span class="keywordtype">bool</span> running = <span class="keyword">true</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> ctrlCHandler(<span class="keywordtype">int</span>)</div><div class="line">{</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Shutting down...&quot;</span> &lt;&lt; std::endl;</div><div class="line">    running = <span class="keyword">false</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> setupCtrlCHandler()</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>sigaction sigIntHandler;</div><div class="line">    sigIntHandler.sa_handler = ctrlCHandler;</div><div class="line">    sigemptyset(&amp;sigIntHandler.sa_mask);</div><div class="line">    sigIntHandler.sa_flags = 0;</div><div class="line">    sigaction(SIGINT, &amp;sigIntHandler, 0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</div><div class="line">std::string format(<span class="keyword">const</span> std::string&amp; input, Args... args)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> size = std::snprintf(<span class="keyword">nullptr</span>, 0, input.c_str(), args...);</div><div class="line">    std::string output(size, <span class="charliteral">&#39;\0&#39;</span>);</div><div class="line">    std::snprintf(&amp;output[0], size + 1, input.c_str(), args...);</div><div class="line">    <span class="keywordflow">return</span> output;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container&gt;</div><div class="line"><span class="keywordtype">bool</span> contains(<span class="keyword">const</span> Container&amp; c, <span class="keyword">const</span> std::string&amp; value)</div><div class="line">{</div><div class="line">    <span class="keywordflow">return</span> std::find(c.begin(), c.end(), value) != c.end();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container&gt;</div><div class="line"><span class="keywordtype">void</span> <span class="keyword">remove</span>(Container&amp; c, <span class="keyword">const</span> std::string&amp; value)</div><div class="line">{</div><div class="line">    c.erase(std::remove(c.begin(), c.end(), value), c.end());</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> print_usage()</div><div class="line">{</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Usage: rockets-server [interface:port] [ws-protocol]&quot;</span></div><div class="line">              &lt;&lt; std::endl</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot;Options: --jsonrpc - use JSON-RPC 2.0 protocol&quot;</span> &lt;&lt; std::endl;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">    setupCtrlCHandler();</div><div class="line"></div><div class="line">    std::vector&lt;std::string&gt; args;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; argc; ++i)</div><div class="line">        args.emplace_back(argv[i]);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (contains(args, <span class="stringliteral">&quot;--help&quot;</span>))</div><div class="line">    {</div><div class="line">        print_usage();</div><div class="line">        <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> useJsonRpc = contains(args, <span class="stringliteral">&quot;--jsonrpc&quot;</span>);</div><div class="line">    <span class="keyword">remove</span>(args, <span class="stringliteral">&quot;--jsonrpc&quot;</span>);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> <span class="keyword">interface </span>= (args.size() &gt;= 1) ? args[0] : <span class="stringliteral">&quot;:8888&quot;</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> wsProtocol = (args.size() &gt;= 2) ? args[1] : <span class="stringliteral">&quot;rockets&quot;</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">try</span></div><div class="line">    {</div><div class="line">        <a class="code" href="classrockets_1_1_server.html">Server</a> server{interface, wsProtocol};</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> uri = server.<a class="code" href="classrockets_1_1_server.html#ac5b8077fbf83e41560e1193b98449144">getURI</a>();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> page = format(htmlPage, uri.c_str(), wsProtocol.c_str(),</div><div class="line">                                 useJsonRpc ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div><div class="line"></div><div class="line">        server.handle(http::Method::GET, <span class="stringliteral">&quot;&quot;</span>, [&amp;page](<span class="keyword">const</span> <a class="code" href="structrockets_1_1http_1_1_request.html">http::Request</a>&amp;) {</div><div class="line">            <span class="keywordflow">return</span> http::make_ready_response(http::Code::OK, page, <span class="stringliteral">&quot;text/html&quot;</span>);</div><div class="line">        });</div><div class="line"></div><div class="line">        std::unique_ptr&lt;jsonrpc::Server&lt;rockets::Server&gt;&gt; rpc;</div><div class="line">        <span class="keywordflow">if</span> (useJsonRpc)</div><div class="line">        {</div><div class="line">            rpc = std::make_unique&lt;jsonrpc::Server&lt;rockets::Server&gt;&gt;(server);</div><div class="line">            rpc-&gt;bind(<span class="stringliteral">&quot;echo&quot;</span>, [](<span class="keyword">const</span> jsonrpc::Request&amp; req) {</div><div class="line">                <span class="keyword">using namespace </span>rockets_nlohmann;</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> input = json::parse(req.message, <span class="keyword">nullptr</span>, <span class="keyword">false</span>);</div><div class="line">                <span class="keywordflow">if</span> (input.count(<span class="stringliteral">&quot;message&quot;</span>))</div><div class="line">                    <span class="keywordflow">return</span> <a class="code" href="structrockets_1_1jsonrpc_1_1_response.html">jsonrpc::Response</a>{input[<span class="stringliteral">&quot;message&quot;</span>].dump()};</div><div class="line">                <span class="keywordflow">return</span> jsonrpc::Response::invalidParams();</div><div class="line">            });</div><div class="line">            <span class="comment">// also accept HTTP POST &quot;/&quot; JSON-RPC commands</span></div><div class="line">            jsonrpc::connect(server, <span class="stringliteral">&quot;&quot;</span>, *rpc);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            server.handleText([](<a class="code" href="structrockets_1_1ws_1_1_request.html">ws::Request</a> request) {</div><div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&quot;server echo: &quot;</span> + request.message;</div><div class="line">            });</div><div class="line">        }</div><div class="line"></div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Listening on: http://&quot;</span> &lt;&lt; uri</div><div class="line">                  &lt;&lt; <span class="stringliteral">&quot; with websockets subprotocol &#39;&quot;</span> &lt;&lt; wsProtocol &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line">        <span class="keywordflow">if</span> (useJsonRpc)</div><div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot; using JSON-RPC 2.0&quot;</span>;</div><div class="line">        std::cout &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> (running)</div><div class="line">            server.process(100);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::runtime_error&amp; e)</div><div class="line">    {</div><div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::invalid_argument&amp; e)</div><div class="line">    {</div><div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Invalid argument: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div></div><!-- fragment --> 
<p>Definition at line <a class="el" href="server_8h_source.html#l00042">42</a> of file <a class="el" href="server_8h_source.html">server.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac3881cb8cadc9a57c994d9ddd4bceeac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rockets::Server::Server </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>threadCount</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new server. </p>
<p>If no interface is given, the server listens on all interfaces. If no port is given, the server selects a random port. Use <a class="el" href="classrockets_1_1_server.html#ac5b8077fbf83e41560e1193b98449144">getURI()</a> to retrieve the chosen parameters.</p>
<p>There are three ways of processing requests on the interface:</p><ul>
<li>Calling <a class="el" href="classrockets_1_1_socket_based_interface.html#aba549a192dd24a91308837c5192a8b22" title="Process all sockets using the internal poll array. ">process()</a> regularly in the application's main loop.</li>
<li>Integrating the socket descriptor(s) in an external poll array, using <a class="el" href="classrockets_1_1_socket_based_interface.html#a43aa9c625c9f69b26583ce01e511e6e2" title="Set a listener for integrating the server in an external poll array. ">setSocketListener()</a> and calling <a class="el" href="classrockets_1_1_socket_based_interface.html#ae0200deb463dbce66fc8bc4fcdf96353" title="Process pending data on a given socket. ">processSocket()</a> when notified.</li>
<li>Using internal service thread(s) by setting threadCount &gt; 0. Note that in this case the registered callbacks will be executed asynchronously from the internal service threads.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uri</td><td>The server address in the form "[interface][:port]". </td></tr>
    <tr><td class="paramname">name</td><td>The name of the websockets protocol, disabled if empty. </td></tr>
    <tr><td class="paramname">threadCount</td><td>The number of internal service threads to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>on malformed URI or connection issues. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a42722cecccc10162920debf9aaf013ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rockets::Server::~Server </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminate the server. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9165a17b2ee66ff8978c3d4c08a7125e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::broadcastBinary </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broadcast a binary message to all websocket clients. </p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a9165a17b2ee66ff8978c3d4c08a7125e_icgraph.png" border="0" usemap="#classrockets_1_1_server_a9165a17b2ee66ff8978c3d4c08a7125e_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a9165a17b2ee66ff8978c3d4c08a7125e_icgraph" id="classrockets_1_1_server_a9165a17b2ee66ff8978c3d4c08a7125e_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="260,13,465,43"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="515,13,696,43"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adef924d8b528f676624829c7338fd68c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::broadcastText </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broadcast a text message to all websocket clients. </p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_adef924d8b528f676624829c7338fd68c_icgraph.png" border="0" usemap="#classrockets_1_1_server_adef924d8b528f676624829c7338fd68c_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_adef924d8b528f676624829c7338fd68c_icgraph" id="classrockets_1_1_server_adef924d8b528f676624829c7338fd68c_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="289,5,495,35"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="544,5,725,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a18c47d48b0ce7925e8207e16839cafca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t rockets::Server::getConnectionCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the number of connected websockets clients. </dd></dl>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a18c47d48b0ce7925e8207e16839cafca_icgraph.png" border="0" usemap="#classrockets_1_1_server_a18c47d48b0ce7925e8207e16839cafca_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a18c47d48b0ce7925e8207e16839cafca_icgraph" id="classrockets_1_1_server_a18c47d48b0ce7925e8207e16839cafca_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="295,13,500,43"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="549,13,731,43"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a885b592db3418b36ee5f5a148111d75f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t rockets::Server::getPort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the server port. </dd></dl>

</div>
</div>
<a class="anchor" id="aa5ceff57f8a07703f649a011283081fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int rockets::Server::getThreadCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the number of internal service threads. </dd></dl>

</div>
</div>
<a class="anchor" id="ac5b8077fbf83e41560e1193b98449144"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string rockets::Server::getURI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the server URI in the form "[hostname][:port]". </dd></dl>

</div>
</div>
<a class="anchor" id="ae9deac0c145f89092a34b21e28e7d730"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rockets::Server::handle </td>
          <td>(</td>
          <td class="paramtype">http::Method&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">http::RESTFunc&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a single method on a given endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">method</td><td>to handle </td></tr>
    <tr><td class="paramname">endpoint</td><td>the endpoint to receive requests for during receive(). </td></tr>
    <tr><td class="paramname">func</td><td>the callback function for serving the request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if subscription was successful. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>if attempting to register "registry" endpoint. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8381000400b391697793b87108636f41">handleGET()</a>, and <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_ae9deac0c145f89092a34b21e28e7d730_icgraph.png" border="0" usemap="#classrockets_1_1_server_ae9deac0c145f89092a34b21e28e7d730_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_ae9deac0c145f89092a34b21e28e7d730_icgraph" id="classrockets_1_1_server_ae9deac0c145f89092a34b21e28e7d730_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8381000400b391697793b87108636f41" title="Expose a JSON&#45;serializable object. " alt="" coords="235,5,443,35"/>
<area shape="rect" id="node7" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="236,59,441,88"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="491,32,672,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a63bdb8fa3afa55a17e28f73e8232403c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Obj &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rockets::Server::handle </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Obj &amp;&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a JSON-serializable object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>to expose. </td></tr>
    <tr><td class="paramname">endpoint</td><td>for accessing the object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if subscription was successful. </dd></dl>

<p>Definition at line <a class="el" href="server_8h_source.html#l00114">114</a> of file <a class="el" href="server_8h_source.html">server.h</a>.</p>

<p>References <a class="el" href="classrockets_1_1_server.html#a8381000400b391697793b87108636f41">handleGET()</a>, and <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a63bdb8fa3afa55a17e28f73e8232403c_cgraph.png" border="0" usemap="#classrockets_1_1_server_a63bdb8fa3afa55a17e28f73e8232403c_cgraph" alt=""/></div>
<map name="classrockets_1_1_server_a63bdb8fa3afa55a17e28f73e8232403c_cgraph" id="classrockets_1_1_server_a63bdb8fa3afa55a17e28f73e8232403c_cgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8381000400b391697793b87108636f41" title="Expose a JSON&#45;serializable object. " alt="" coords="235,59,443,88"/>
<area shape="rect" id="node7" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="236,165,441,195"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#ae9deac0c145f89092a34b21e28e7d730" title="Handle a single method on a given endpoint. " alt="" coords="520,5,701,35"/>
<area shape="rect" id="node10" href="classrockets_1_1_server.html#a7b37b68e2b3adc1c6145f9b907c73ecc" title="Set a callback for handling incoming connections. " alt="" coords="503,59,719,88"/>
<area shape="rect" id="node12" href="classrockets_1_1_server.html#a7969ed5dd17b41dcff37d9dea246540d" title="Set a callback for handling closing connections. " alt="" coords="501,112,720,141"/>
<area shape="rect" id="node14" href="classrockets_1_1_server.html#aab147975dcd9e4db242742e2f3ccce19" title="Set a callback for handling text messages from websocket clients. " alt="" coords="505,165,716,195"/>
<area shape="rect" id="node16" href="classrockets_1_1_server.html#a58e861b40b5102a23faf791d5599d2d2" title="Set a callback for handling binray messages from websocket clients. " alt="" coords="500,219,721,248"/>
<area shape="rect" id="node18" href="classrockets_1_1_server.html#adef924d8b528f676624829c7338fd68c" title="Broadcast a text message to all websocket clients. " alt="" coords="493,272,728,301"/>
<area shape="rect" id="node20" href="classrockets_1_1_server.html#a9165a17b2ee66ff8978c3d4c08a7125e" title="Broadcast a binary message to all websocket clients. " alt="" coords="509,325,712,371"/>
<area shape="rect" id="node22" href="classrockets_1_1_server.html#a18c47d48b0ce7925e8207e16839cafca" title="rockets::Server::getConnection\lCount" alt="" coords="492,394,729,441"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a58e861b40b5102a23faf791d5599d2d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::handleBinary </td>
          <td>(</td>
          <td class="paramtype">ws::MessageCallback&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback for handling binray messages from websocket clients. </p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a58e861b40b5102a23faf791d5599d2d2_icgraph.png" border="0" usemap="#classrockets_1_1_server_a58e861b40b5102a23faf791d5599d2d2_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a58e861b40b5102a23faf791d5599d2d2_icgraph" id="classrockets_1_1_server_a58e861b40b5102a23faf791d5599d2d2_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="279,5,484,35"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="533,5,715,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7969ed5dd17b41dcff37d9dea246540d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::handleClose </td>
          <td>(</td>
          <td class="paramtype">ws::ConnectionCallback&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback for handling closing connections. </p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a7969ed5dd17b41dcff37d9dea246540d_icgraph.png" border="0" usemap="#classrockets_1_1_server_a7969ed5dd17b41dcff37d9dea246540d_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a7969ed5dd17b41dcff37d9dea246540d_icgraph" id="classrockets_1_1_server_a7969ed5dd17b41dcff37d9dea246540d_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="273,5,479,35"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="528,5,709,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8381000400b391697793b87108636f41"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Obj &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rockets::Server::handleGET </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Obj &amp;&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expose a JSON-serializable object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>to expose. </td></tr>
    <tr><td class="paramname">endpoint</td><td>for accessing the object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if subscription was successful. </dd></dl>

<p>Definition at line <a class="el" href="server_8h_source.html#l00127">127</a> of file <a class="el" href="server_8h_source.html">server.h</a>.</p>

<p>References <a class="el" href="classrockets_1_1_server.html#ae9deac0c145f89092a34b21e28e7d730">handle()</a>.</p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c">handle()</a>.</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a8381000400b391697793b87108636f41_cgraph.png" border="0" usemap="#classrockets_1_1_server_a8381000400b391697793b87108636f41_cgraph" alt=""/></div>
<map name="classrockets_1_1_server_a8381000400b391697793b87108636f41_cgraph" id="classrockets_1_1_server_a8381000400b391697793b87108636f41_cgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#ae9deac0c145f89092a34b21e28e7d730" title="Handle a single method on a given endpoint. " alt="" coords="261,5,443,35"/>
</map>
</div>
</p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a8381000400b391697793b87108636f41_icgraph.png" border="0" usemap="#classrockets_1_1_server_a8381000400b391697793b87108636f41_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a8381000400b391697793b87108636f41_icgraph" id="classrockets_1_1_server_a8381000400b391697793b87108636f41_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="261,5,443,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b37b68e2b3adc1c6145f9b907c73ecc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::handleOpen </td>
          <td>(</td>
          <td class="paramtype">ws::ConnectionCallback&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback for handling incoming connections. </p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a7b37b68e2b3adc1c6145f9b907c73ecc_icgraph.png" border="0" usemap="#classrockets_1_1_server_a7b37b68e2b3adc1c6145f9b907c73ecc_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a7b37b68e2b3adc1c6145f9b907c73ecc_icgraph" id="classrockets_1_1_server_a7b37b68e2b3adc1c6145f9b907c73ecc_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="273,5,479,35"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="528,5,709,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8cf01ade9b3730d342aa632d03e22fc8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Obj &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rockets::Server::handlePUT </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Obj &amp;&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Subscribe a JSON-deserializable object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>to subscribe. </td></tr>
    <tr><td class="paramname">endpoint</td><td>for modifying the object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if subscription was successful. </dd></dl>

<p>Definition at line <a class="el" href="server_8h_source.html#l00144">144</a> of file <a class="el" href="server_8h_source.html">server.h</a>.</p>

<p>References <a class="el" href="classrockets_1_1_server.html#a9165a17b2ee66ff8978c3d4c08a7125e">broadcastBinary()</a>, <a class="el" href="classrockets_1_1_server.html#adef924d8b528f676624829c7338fd68c">broadcastText()</a>, <a class="el" href="classrockets_1_1_server.html#a18c47d48b0ce7925e8207e16839cafca">getConnectionCount()</a>, <a class="el" href="classrockets_1_1_server.html#ae9deac0c145f89092a34b21e28e7d730">handle()</a>, <a class="el" href="classrockets_1_1_server.html#a58e861b40b5102a23faf791d5599d2d2">handleBinary()</a>, <a class="el" href="classrockets_1_1_server.html#a7969ed5dd17b41dcff37d9dea246540d">handleClose()</a>, <a class="el" href="classrockets_1_1_server.html#a7b37b68e2b3adc1c6145f9b907c73ecc">handleOpen()</a>, and <a class="el" href="classrockets_1_1_server.html#aab147975dcd9e4db242742e2f3ccce19">handleText()</a>.</p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c">handle()</a>.</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_cgraph.png" border="0" usemap="#classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_cgraph" alt=""/></div>
<map name="classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_cgraph" id="classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_cgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a9165a17b2ee66ff8978c3d4c08a7125e" title="Broadcast a binary message to all websocket clients. " alt="" coords="280,5,483,51"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#adef924d8b528f676624829c7338fd68c" title="Broadcast a text message to all websocket clients. " alt="" coords="264,75,499,104"/>
<area shape="rect" id="node7" href="classrockets_1_1_server.html#a18c47d48b0ce7925e8207e16839cafca" title="rockets::Server::getConnection\lCount" alt="" coords="263,127,500,174"/>
<area shape="rect" id="node9" href="classrockets_1_1_server.html#ae9deac0c145f89092a34b21e28e7d730" title="Handle a single method on a given endpoint. " alt="" coords="291,197,472,227"/>
<area shape="rect" id="node11" href="classrockets_1_1_server.html#a58e861b40b5102a23faf791d5599d2d2" title="Set a callback for handling binray messages from websocket clients. " alt="" coords="271,251,492,280"/>
<area shape="rect" id="node13" href="classrockets_1_1_server.html#a7969ed5dd17b41dcff37d9dea246540d" title="Set a callback for handling closing connections. " alt="" coords="272,304,491,333"/>
<area shape="rect" id="node15" href="classrockets_1_1_server.html#a7b37b68e2b3adc1c6145f9b907c73ecc" title="Set a callback for handling incoming connections. " alt="" coords="273,357,489,387"/>
<area shape="rect" id="node17" href="classrockets_1_1_server.html#aab147975dcd9e4db242742e2f3ccce19" title="Set a callback for handling text messages from websocket clients. " alt="" coords="276,411,487,440"/>
</map>
</div>
</p>

<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_icgraph.png" border="0" usemap="#classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_icgraph" id="classrockets_1_1_server_a8cf01ade9b3730d342aa632d03e22fc8_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="261,5,443,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aab147975dcd9e4db242742e2f3ccce19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::handleText </td>
          <td>(</td>
          <td class="paramtype">ws::MessageCallback&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback for handling text messages from websocket clients. </p>

<p>Referenced by <a class="el" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8">handlePUT()</a>.</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classrockets_1_1_server_aab147975dcd9e4db242742e2f3ccce19_icgraph.png" border="0" usemap="#classrockets_1_1_server_aab147975dcd9e4db242742e2f3ccce19_icgraph" alt=""/></div>
<map name="classrockets_1_1_server_aab147975dcd9e4db242742e2f3ccce19_icgraph" id="classrockets_1_1_server_aab147975dcd9e4db242742e2f3ccce19_icgraph">
<area shape="rect" id="node3" href="classrockets_1_1_server.html#a8cf01ade9b3730d342aa632d03e22fc8" title="Subscribe a JSON&#45;deserializable object. " alt="" coords="265,5,471,35"/>
<area shape="rect" id="node5" href="classrockets_1_1_server.html#a63bdb8fa3afa55a17e28f73e8232403c" title="Handle a JSON&#45;serializable object. " alt="" coords="520,5,701,35"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abebcb3ca363f2905c36a5decf7ab4eff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::handleText </td>
          <td>(</td>
          <td class="paramtype">ws::MessageCallbackAsync&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback for handling text messages from websocket clients. </p>

</div>
</div>
<a class="anchor" id="a4e1f56d98dbc47a5442830f7ce774359"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rockets::Server::remove </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove all handling for a given endpoint. </p>
<dl class="section return"><dt>Returns</dt><dd>false if endpoint did not exist. </dd></dl>

</div>
</div>
<a class="anchor" id="aa471f0640af5e55ea1f88ce8357243e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rockets::Server::setHttpFilter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classrockets_1_1http_1_1_filter.html">http::Filter</a> *&#160;</td>
          <td class="paramname"><em>filter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a filter for HTTP requests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filter</td><td>to set, nullptr to remove. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="server_8h_source.html">server.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>rockets</b></li><li class="navelem"><a class="el" href="classrockets_1_1_server.html">Server</a></li>
    <li class="footer">Generated on Fri Mar 9 2018 04:20:56 for Rockets by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
