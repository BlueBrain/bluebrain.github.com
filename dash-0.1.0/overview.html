<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DASH: Overview</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DASH
   
   </div>
   <div id="projectbrief">Data Access and Sharing</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="Class"></a>
Hierarchy</h2>
<p>The dash object hierarchy provides two classes to create directed acyclic graphs (DAG) of objects, Node and Attribute. The Node forms the DAG by having parent and child nodes and holds data through attributes. An Attribute stores a value of boost::any or similar construct. This tree structure was chosen over a flat object hierarchy to allow automatic mapping of object hierarchies on remote nodes.</p>
<p>The core of the data storage relies on lock-free vectors and atomic variables to store pointer tables and per-item context counts. The ContextData is a template class managing the access and duplication of the context-specific data using the pseudo-code from the previous section.</p>
<p>DASH does not provide a way to name children or attributes. The application is responsible for tracking the index or pointer of each child or attribute if it needs to distinguish the type of the item.</p>
<div class="image">
<img src="dashUML.png" alt="dashUML.png"/>
<div class="caption">
DASH UML Diagram</div></div>
 <h2><a class="anchor" id="issues"></a>
Issues</h2>
<h3><a class="anchor" id="issue1"></a>
1. Which context tracks which data?</h3>
<p><b>Resolved:</b> Nodes and attributes are visible in the context they are created in. In all other contexts, node trees have to be explicitly mapped. Nodes inserted through a change are automatically mapped.</p>
<p>Often a context is only interested in parts of its parent context data, that is, a context update can drop certain data. This optimizes memory usage. Remote synchronization makes selective mapping and update a requirement for performance reasons.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="overview.html#issue4">4. How are inserted nodes handled when the change is applied to a new context?</a></dd></dl>
<h3><a class="anchor" id="issue2"></a>
2. Serializing boost::any</h3>
<p>...is not possible out of the box.</p>
<ul>
<li>Option 1: Roll our own variant of boost::any with serialization support</li>
<li>Option 2: Mirror boost::any ValueHolder approach in Attribute for serialization</li>
</ul>
<h3><a class="anchor" id="issue3"></a>
3. Data distribution using Collage</h3>
<ul>
<li>How to create a local context from a remote contexts</li>
<li>How to link remote contexts</li>
</ul>
<h3><a class="anchor" id="issue4"></a>
4. How are inserted nodes handled when the change is applied to a new context?</h3>
<p>In general:</p>
<ul>
<li>If the parent or child node is not mapped, the change is ignored.</li>
</ul>
<h4><a class="anchor" id="issue41"></a>
Option 1: Snapshot at insert time</h4>
<ul>
<li>The child node receives the view at the time of the insertion in the originating context when the insert change is applied.</li>
<li>The insert-preserving change delays the reference increase until commit? No: object may be modified already.</li>
</ul>
<p>Pros: Intuitive behaviour</p>
<p>Cons:</p>
<ul>
<li>Expensive O(NxM) operation: for each insert change N, need to create a snapshot change for M objects in the inserted tree. The snapshot is created using a per-change context to which inserted objects are mapped until the change is disposed.</li>
</ul>
<ul>
<li>No erase unmapping: When a subtree is removed from its last parent through a change, it cannot automatically by unmapped from the context since the application may have a reference. A notification callback may be used to let the application decide.</li>
</ul>
<h4><a class="anchor" id="issue42"></a>
Option 2: Propagate at insert time</h4>
<ul>
<li>If the parent node is mapped and the child context has no view of the object, the child contect view is initialized at insert time</li>
</ul>
<p>Prerequisite: To contexts have to be known at insert time. If change is applied to a different context, the insert operation is either ignored (no mapping exists) of the child is inserted with a different mapping (insert mapping is different from existing mapping).</p>
<p>To context can be known through a context graph or through the mapping of parent nodes.</p>
<p>Pros: Simple and fast implementation</p>
<p>Cons:</p>
<ul>
<li>Does conflict with existing changes to the same object on the current context</li>
<li>Limits change direction</li>
<li>Unintuitive when receiving changes for the same object from multiple contexts</li>
</ul>
<p>Not usable due to Con #1.</p>
<h4><a class="anchor" id="issue43"></a>
Option 3: Ignore unmapped objects</h4>
<p>Pros:</p>
<ul>
<li>Simple, predictable API</li>
<li>May be extended by application towards <a class="el" href="overview.html#issue41">Option 1: Snapshot at insert time</a> trough exposing Change hooks?</li>
</ul>
<p>Cons: App has to map new (child) nodes, otherwise insert operations are ignored. </p>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 2 2012 17:04:48 for DASH by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
